<?xml version="1.0" encoding="UTF-8"?>
<model>
	<config>
		<name>User</name>
		<table>users</table>
		<callback>true</callback>
		<repository>true</repository>
		<role>true</role>
		<resource>true</resource>
		<controller>true</controller>
	</config>
	<fields>
		<field>
			<name>id</name>
			<type>index</type>
			<strategy>uuid</strategy>
		</field>		
		<field>
			<name>email</name>
			<type>string</type>
			<length>64</length>
			<unique>true</unique>
		</field>
		<field>
			<name>password</name>
			<type>string</type>
		</field>
		<field>
			<name>active</name>
			<type>boolean</type>
			<default>false</default>
		</field>
		<field>
			<name>profile</name>
			<type>relation</type>
			<relation>OneToOne</relation>
			<targetEntity>Profile</targetEntity>
			<cascades>
				<cascade>persist</cascade>
				<cascade>remove</cascade>
			</cascades>
		</field>
		<field>
			<name>type</name>
			<type>relation</type>
			<relation>OneToMany</relation>
			<targetEntity>UserType</targetEntity>
			<cascades>
				<cascade>persist</cascade>
				<cascade>remove</cascade>
			</cascades>
		</field>
        <field>
            <name>pictures</name>
            <type>relation</type>
            <relation>OneToOne</relation>
            <targetEntity>Picture</targetEntity>
            <cascades>
                <cascade>persist</cascade>
                <cascade>remove</cascade>
            </cascades>
        </field>
        <field>
			<name>hashCode</name>
			<type>string</type>
            <nullable>true</nullable>
		</field>
		<field>
			<name>created</name>
			<type>datetime</type>
		</field>
		<field>
			<name>modified</name>
			<type>datetime</type>
			<nullable>true</nullable>
		</field>
	</fields>
	<validations>		
		<validation>
			<field>email</field>
			<rules>
				<rule>
					<type>notEmpty</type>
					<message>Email can't be empty</message>
				</rule>
				<rule>
					<type>email</type>
					<message>Email format is not correct</message>
				</rule>
				<rule>
					<type>unique</type>
					<message>Email has been taken, try other email</message>
				</rule>
			</rules>
		</validation>
		<validation>
			<field>password</field>
			<rules>
				<rule>
					<type>notEmpty</type>
					<message>Password can't be empty</message>				
				</rule>
                <rule>
                    <type>lengthBetween</type>
                    <message>Password length must between 5-18 characters</message>
                    <min>5</min>
                    <max>18</max>
                </rule>
			</rules>
		</validation>		
	</validations>
</model>
